/*
    3d renderer module. 
    Dependencies: Three.js
*/
var Renderer = function() {
    var container, camera, scene, renderer, earthMesh, group, mouseVector, point, point2, sphere2DRadius, windowX, windowY, 
        visualLayer, visualLayerGeometry, visualLayerTexture, visualArc, config, climateGradient,visualizations={},visualization,
        G,
        subgeo = new THREE.Geometry();
        rotation = { x: 0, y: 0, z: 0 },
        PI_HALF = Math.PI / 2,
        onRender = function() {}, ready = false;
    mouseVector = new THREE.Vector2(0,0);

    climateGradient = document.createElement( 'canvas' ); 
    var climateBg = new Image();
    climateBg.src = 'data:image/jpeg;base64,/9j/4RS3RXhpZgAATU0AKgAAAAgABwESAAMAAAABAAEAAAEaAAUAAAABAAAAYgEbAAUAAAABAAAAagEoAAMAAAABAAIAAAExAAIAAAAeAAAAcgEyAAIAAAAUAAAAkIdpAAQAAAABAAAApAAAANAACvu4AAAnEAAK+7gAACcQQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MAMjAxMzowMjowMyAxNTo1NTo0OQAAA6ABAAMAAAABAAEAAKACAAQAAAABAAABAKADAAQAAAABAAABAAAAAAAAAAAGAQMAAwAAAAEABgAAARoABQAAAAEAAAEeARsABQAAAAEAAAEmASgAAwAAAAEAAgAAAgEABAAAAAEAAAEuAgIABAAAAAEAABOBAAAAAAAAAEgAAAABAAAASAAAAAH/2P/iDFhJQ0NfUFJPRklMRQABAQAADEhMaW5vAhAAAG1udHJSR0IgWFlaIAfOAAIACQAGADEAAGFjc3BNU0ZUAAAAAElFQyBzUkdCAAAAAAAAAAAAAAAAAAD21gABAAAAANMtSFAgIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEWNwcnQAAAFQAAAAM2Rlc2MAAAGEAAAAbHd0cHQAAAHwAAAAFGJrcHQAAAIEAAAAFHJYWVoAAAIYAAAAFGdYWVoAAAIsAAAAFGJYWVoAAAJAAAAAFGRtbmQAAAJUAAAAcGRtZGQAAALEAAAAiHZ1ZWQAAANMAAAAhnZpZXcAAAPUAAAAJGx1bWkAAAP4AAAAFG1lYXMAAAQMAAAAJHRlY2gAAAQwAAAADHJUUkMAAAQ8AAAIDGdUUkMAAAQ8AAAIDGJUUkMAAAQ8AAAIDHRleHQAAAAAQ29weXJpZ2h0IChjKSAxOTk4IEhld2xldHQtUGFja2FyZCBDb21wYW55AABkZXNjAAAAAAAAABJzUkdCIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAAEnNSR0IgSUVDNjE5NjYtMi4xAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABYWVogAAAAAAAA81EAAQAAAAEWzFhZWiAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAAG+iAAA49QAAA5BYWVogAAAAAAAAYpkAALeFAAAY2lhZWiAAAAAAAAAkoAAAD4QAALbPZGVzYwAAAAAAAAAWSUVDIGh0dHA6Ly93d3cuaWVjLmNoAAAAAAAAAAAAAAAWSUVDIGh0dHA6Ly93d3cuaWVjLmNoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGRlc2MAAAAAAAAALklFQyA2MTk2Ni0yLjEgRGVmYXVsdCBSR0IgY29sb3VyIHNwYWNlIC0gc1JHQgAAAAAAAAAAAAAALklFQyA2MTk2Ni0yLjEgRGVmYXVsdCBSR0IgY29sb3VyIHNwYWNlIC0gc1JHQgAAAAAAAAAAAAAAAAAAAAAAAAAAAABkZXNjAAAAAAAAACxSZWZlcmVuY2UgVmlld2luZyBDb25kaXRpb24gaW4gSUVDNjE5NjYtMi4xAAAAAAAAAAAAAAAsUmVmZXJlbmNlIFZpZXdpbmcgQ29uZGl0aW9uIGluIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAdmlldwAAAAAAE6T+ABRfLgAQzxQAA+3MAAQTCwADXJ4AAAABWFlaIAAAAAAATAlWAFAAAABXH+dtZWFzAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAACjwAAAAJzaWcgAAAAAENSVCBjdXJ2AAAAAAAABAAAAAAFAAoADwAUABkAHgAjACgALQAyADcAOwBAAEUASgBPAFQAWQBeAGMAaABtAHIAdwB8AIEAhgCLAJAAlQCaAJ8ApACpAK4AsgC3ALwAwQDGAMsA0ADVANsA4ADlAOsA8AD2APsBAQEHAQ0BEwEZAR8BJQErATIBOAE+AUUBTAFSAVkBYAFnAW4BdQF8AYMBiwGSAZoBoQGpAbEBuQHBAckB0QHZAeEB6QHyAfoCAwIMAhQCHQImAi8COAJBAksCVAJdAmcCcQJ6AoQCjgKYAqICrAK2AsECywLVAuAC6wL1AwADCwMWAyEDLQM4A0MDTwNaA2YDcgN+A4oDlgOiA64DugPHA9MD4APsA/kEBgQTBCAELQQ7BEgEVQRjBHEEfgSMBJoEqAS2BMQE0wThBPAE/gUNBRwFKwU6BUkFWAVnBXcFhgWWBaYFtQXFBdUF5QX2BgYGFgYnBjcGSAZZBmoGewaMBp0GrwbABtEG4wb1BwcHGQcrBz0HTwdhB3QHhgeZB6wHvwfSB+UH+AgLCB8IMghGCFoIbgiCCJYIqgi+CNII5wj7CRAJJQk6CU8JZAl5CY8JpAm6Cc8J5Qn7ChEKJwo9ClQKagqBCpgKrgrFCtwK8wsLCyILOQtRC2kLgAuYC7ALyAvhC/kMEgwqDEMMXAx1DI4MpwzADNkM8w0NDSYNQA1aDXQNjg2pDcMN3g34DhMOLg5JDmQOfw6bDrYO0g7uDwkPJQ9BD14Peg+WD7MPzw/sEAkQJhBDEGEQfhCbELkQ1xD1ERMRMRFPEW0RjBGqEckR6BIHEiYSRRJkEoQSoxLDEuMTAxMjE0MTYxODE6QTxRPlFAYUJxRJFGoUixStFM4U8BUSFTQVVhV4FZsVvRXgFgMWJhZJFmwWjxayFtYW+hcdF0EXZReJF64X0hf3GBsYQBhlGIoYrxjVGPoZIBlFGWsZkRm3Gd0aBBoqGlEadxqeGsUa7BsUGzsbYxuKG7Ib2hwCHCocUhx7HKMczBz1HR4dRx1wHZkdwx3sHhYeQB5qHpQevh7pHxMfPh9pH5Qfvx/qIBUgQSBsIJggxCDwIRwhSCF1IaEhziH7IiciVSKCIq8i3SMKIzgjZiOUI8Ij8CQfJE0kfCSrJNolCSU4JWgllyXHJfcmJyZXJocmtyboJxgnSSd6J6sn3CgNKD8ocSiiKNQpBik4KWspnSnQKgIqNSpoKpsqzysCKzYraSudK9EsBSw5LG4soizXLQwtQS12Last4S4WLkwugi63Lu4vJC9aL5Evxy/+MDUwbDCkMNsxEjFKMYIxujHyMioyYzKbMtQzDTNGM38zuDPxNCs0ZTSeNNg1EzVNNYc1wjX9Njc2cjauNuk3JDdgN5w31zgUOFA4jDjIOQU5Qjl/Obw5+To2OnQ6sjrvOy07azuqO+g8JzxlPKQ84z0iPWE9oT3gPiA+YD6gPuA/IT9hP6I/4kAjQGRApkDnQSlBakGsQe5CMEJyQrVC90M6Q31DwEQDREdEikTORRJFVUWaRd5GIkZnRqtG8Ec1R3tHwEgFSEtIkUjXSR1JY0mpSfBKN0p9SsRLDEtTS5pL4kwqTHJMuk0CTUpNk03cTiVObk63TwBPSU+TT91QJ1BxULtRBlFQUZtR5lIxUnxSx1MTU19TqlP2VEJUj1TbVShVdVXCVg9WXFapVvdXRFeSV+BYL1h9WMtZGllpWbhaB1pWWqZa9VtFW5Vb5Vw1XIZc1l0nXXhdyV4aXmxevV8PX2Ffs2AFYFdgqmD8YU9homH1YklinGLwY0Njl2PrZEBklGTpZT1lkmXnZj1mkmboZz1nk2fpaD9olmjsaUNpmmnxakhqn2r3a09rp2v/bFdsr20IbWBtuW4SbmtuxG8eb3hv0XArcIZw4HE6cZVx8HJLcqZzAXNdc7h0FHRwdMx1KHWFdeF2Pnabdvh3VnezeBF4bnjMeSp5iXnnekZ6pXsEe2N7wnwhfIF84X1BfaF+AX5ifsJ/I3+Ef+WAR4CogQqBa4HNgjCCkoL0g1eDuoQdhICE44VHhauGDoZyhteHO4efiASIaYjOiTOJmYn+imSKyoswi5aL/IxjjMqNMY2Yjf+OZo7OjzaPnpAGkG6Q1pE/kaiSEZJ6kuOTTZO2lCCUipT0lV+VyZY0lp+XCpd1l+CYTJi4mSSZkJn8mmia1ZtCm6+cHJyJnPedZJ3SnkCerp8dn4uf+qBpoNihR6G2oiailqMGo3aj5qRWpMelOKWpphqmi6b9p26n4KhSqMSpN6mpqhyqj6sCq3Wr6axcrNCtRK24ri2uoa8Wr4uwALB1sOqxYLHWskuywrM4s660JbSctRO1irYBtnm28Ldot+C4WbjRuUq5wro7urW7LrunvCG8m70VvY++Cr6Evv+/er/1wHDA7MFnwePCX8Lbw1jD1MRRxM7FS8XIxkbGw8dBx7/IPci8yTrJuco4yrfLNsu2zDXMtc01zbXONs62zzfPuNA50LrRPNG+0j/SwdNE08bUSdTL1U7V0dZV1tjXXNfg2GTY6Nls2fHadtr724DcBdyK3RDdlt4c3qLfKd+v4DbgveFE4cziU+Lb42Pj6+Rz5PzlhOYN5pbnH+ep6DLovOlG6dDqW+rl63Dr++yG7RHtnO4o7rTvQO/M8Fjw5fFy8f/yjPMZ86f0NPTC9VD13vZt9vv3ivgZ+Kj5OPnH+lf65/t3/Af8mP0p/br+S/7c/23////tAAxBZG9iZV9DTQAB/+4ADkFkb2JlAGSAAAAAAf/bAIQADAgICAkIDAkJDBELCgsRFQ8MDA8VGBMTFRMTGBEMDAwMDAwRDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAENCwsNDg0QDg4QFA4ODhQUDg4ODhQRDAwMDAwREQwMDAwMDBEMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM/8AAEQgAoACgAwEiAAIRAQMRAf/dAAQACv/EAT8AAAEFAQEBAQEBAAAAAAAAAAMAAQIEBQYHCAkKCwEAAQUBAQEBAQEAAAAAAAAAAQACAwQFBgcICQoLEAABBAEDAgQCBQcGCAUDDDMBAAIRAwQhEjEFQVFhEyJxgTIGFJGhsUIjJBVSwWIzNHKC0UMHJZJT8OHxY3M1FqKygyZEk1RkRcKjdDYX0lXiZfKzhMPTdePzRieUpIW0lcTU5PSltcXV5fVWZnaGlqa2xtbm9jdHV2d3h5ent8fX5/cRAAICAQIEBAMEBQYHBwYFNQEAAhEDITESBEFRYXEiEwUygZEUobFCI8FS0fAzJGLhcoKSQ1MVY3M08SUGFqKygwcmNcLSRJNUoxdkRVU2dGXi8rOEw9N14/NGlKSFtJXE1OT0pbXF1eX1VmZ2hpamtsbW5vYnN0dXZ3eHl6e3x//aAAwDAQACEQMRAD8A9JlvilLfFUftQ8UvtXmlxI4A3pb4p5b4qh9q80vtQ8UuJXAG/LfFKW+Kofah4pfah4pcSuAN+W+KUtVD7UPFP9qHilxK4A3palLVR+0+aX2keKXErgDelqXt8VR+0jxS+0jxS4lcAb0tSlqo/aR4pfaR4pcSuAN6WpS3xVH7SPFN9qHilxK4A35b4ppb4qj9qHim+1DxQ408Ab8t8U8t8VnDKHipDJ80uNXAH//Q6H7X5pfa/NY/2g+KX2g+KYq3Y+1+af7X5rG+0HxT/aD4pKt2Ptfml9r81j/aD4p/tB8UE27H2vzS+1+ax/tB8U/2g+KSrdf7X5pfa/NZHrnxT+ufFJVuv9r80vtfmsj1z4peufFBNuv9r8032vzWT658UvXPilardb7X5pjl+ayfXPimN58UDJLrHL81E5nmsk3nxUTefFMM0gOwMvXlGZkz3WGy4k8q3TYSm+4mn//Rr+un9dZ3rpeulwsPG6Prp/X81neun9dLhVxuh66f11n+sl6yFJ43R9fzS9dZ/rJ/WQpXG6HrJesqHrJ/WTaTxt/1kvWVEWpxagVcTe9ZL1lTFicWJhK4SbfqqJtVfelvUUpr4pzao+oglybcoZZGaIbdT5K08bUBY9B9y2cQSAo/cXEaP//S5z1EvUVfen3p9NLibG9OHquHqQcgU8ScPUg9Vw5SDk0lXEnD04cggqQKYSm0wcpByEFMJhmm0gKkCoBTaFFLIuDIKYCZrUQNUE8rJFYBPCltShV5ZWeAYFMpkKKiM2xGKbGHuW9hN0Cw8Ye5b+CNAhxLpDR//9PjtyfchSpAp5Lm2lDlIFCCmEwyTaQFTCg1EaFFKa4FkERoUWhFa1QyyJC7QiNak1qK1qgllXhZrUVrE7WIrWKGWVkAYtYiBqk1qmGqvPIyxCPamIRSFBwURk2YBEQmUyFBK2eIT4v0l0OANAufxfpLocDgIgpns//U4oBSATAIgCbKTlWpoRGtSaEVrVDKa4Ka1Fa1JrUVrVXnkXBTWIrWJ2tRWtUEsi8KaxFaxJrUZrVBKbIFmsRGtTtaiNChlNkiFg1PCmAlCiMmaIRkKDkUobkAWzBC5RKm5QTwzRT4v0l0WBwFz2L9NdDgcBOCZ7P/1eOAU2hRARGhVpScgFm0IrQoNCM0KvOS8M2hFaFFoRWhV5SXhk0IzQoNCK0KGUmQM2hFaFFoRWhQykyBk0KYCTQpgKIyZYrQkQpwolMtmijchORXITk4M8ETlFScolSBninxfpBdDgcBc9i/SXRYHATgqez/AP/W5EBEaoBEaqMi44SNCM0ITQjMUEyvCRoRmhDYEZoVeZZAzaEZoQ2hGaFBIsgZtCM0KDQitChkWWLJoUwEwCmAoyWWKyi5TKg5AMsUTkJyK5CcpIs8UTlFScoKQM8Wxi/SC6LA4C53F+mF0OBwE4Kns//X5IIjVBqI1Z8i4wSsRmITEZirzLIErEZgQmIzAq8yyBK1FaENqM1QSLLFI1GaENgRWqGRZIswpBMFIBRkssVihuRSENyIZooXILkdyC5SxZoonKCm5QUgZotjF+muhwOAuexfprosDgJwTPZ//9DkwitQmorVmycYJWI7EFiMxQTZAmYjMQmIzVWmyRStRmITUZgUEiyxSsRWhDYEVoUMiyRZgKQCQCkAoyWaLEhQcEUhDcEgWWKB4QXhWHhAeFNEs8ULlBEcoFSgs0U2L9NdHgDQLncX6a6Pp40CcCmez//Z/+0dVlBob3Rvc2hvcCAzLjAAOEJJTQQEAAAAAAAPHAFaAAMbJUccAgAAAgAAADhCSU0EJQAAAAAAEM3P+n2ox74JBXB2rq8Fw044QklNBDoAAAAAAHcAAAAQAAAAAQAAAAAAC3ByaW50T3V0cHV0AAAABAAAAABQc3RTYm9vbAEAAAAASW50ZWVudW0AAAAASW50ZQAAAABDbHJtAAAAD3ByaW50U2l4dGVlbkJpdGJvb2wAAAAAC3ByaW50ZXJOYW1lVEVYVAAAAAEAAAA4QklNBDsAAAAAAbIAAAAQAAAAAQAAAAAAEnByaW50T3V0cHV0T3B0aW9ucwAAABIAAAAAQ3B0bmJvb2wAAAAAAENsYnJib29sAAAAAABSZ3NNYm9vbAAAAAAAQ3JuQ2Jvb2wAAAAAAENudENib29sAAAAAABMYmxzYm9vbAAAAAAATmd0dmJvb2wAAAAAAEVtbERib29sAAAAAABJbnRyYm9vbAAAAAAAQmNrZ09iamMAAAABAAAAAAAAUkdCQwAAAAMAAAAAUmQgIGRvdWJAb+AAAAAAAAAAAABHcm4gZG91YkBv4AAAAAAAAAAAAEJsICBkb3ViQG/gAAAAAAAAAAAAQnJkVFVudEYjUmx0AAAAAAAAAAAAAAAAQmxkIFVudEYjUmx0AAAAAAAAAAAAAAAAUnNsdFVudEYjUHhsQFH+uIAAAAAAAAAKdmVjdG9yRGF0YWJvb2wBAAAAAFBnUHNlbnVtAAAAAFBnUHMAAAAAUGdQQwAAAABMZWZ0VW50RiNSbHQAAAAAAAAAAAAAAABUb3AgVW50RiNSbHQAAAAAAAAAAAAAAABTY2wgVW50RiNQcmNAWQAAAAAAADhCSU0D7QAAAAAAEABH+uIAAQABAEf64gABAAE4QklNBCYAAAAAAA4AAAAAAAAAAAAAP4AAADhCSU0D8gAAAAAACgAA////////AAA4QklNBA0AAAAAAAQAAAB4OEJJTQQZAAAAAAAEAAAAHjhCSU0D8wAAAAAACQAAAAAAAAAAAQA4QklNJxAAAAAAAAoAAQAAAAAAAAABOEJJTQP1AAAAAABIAC9mZgABAGxmZgAGAAAAAAABAC9mZgABAKGZmgAGAAAAAAABADIAAAABAFoAAAAGAAAAAAABADUAAAABAC0AAAAGAAAAAAABOEJJTQP4AAAAAABwAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAADhCSU0EAAAAAAAAAgACOEJJTQQCAAAAAAAMAAAAAAAAAAAAAAAAOEJJTQQwAAAAAAAGAQEBAQEBOEJJTQQtAAAAAAAGAAEAAAAHOEJJTQQIAAAAAAAkAAAAAQAAAkAAAAJAAAAABAAAAAAAAAAgAAAAAAAAAQAAIAABOEJJTQQeAAAAAAAEAAAAADhCSU0EGgAAAAADVQAAAAYAAAAAAAAAAAAAAQAAAAEAAAAAEABjAGwAaQBtAGEAdABlAF8AZwByAGEAZABpAGUAbgB0AAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAbnVsbAAAAAIAAAAGYm91bmRzT2JqYwAAAAEAAAAAAABSY3QxAAAABAAAAABUb3AgbG9uZwAAAAAAAAAATGVmdGxvbmcAAAAAAAAAAEJ0b21sb25nAAABAAAAAABSZ2h0bG9uZwAAAQAAAAAGc2xpY2VzVmxMcwAAAAFPYmpjAAAAAQAAAAAABXNsaWNlAAAAEgAAAAdzbGljZUlEbG9uZwAAAAAAAAAHZ3JvdXBJRGxvbmcAAAAAAAAABm9yaWdpbmVudW0AAAAMRVNsaWNlT3JpZ2luAAAADWF1dG9HZW5lcmF0ZWQAAAAAVHlwZWVudW0AAAAKRVNsaWNlVHlwZQAAAABJbWcgAAAABmJvdW5kc09iamMAAAABAAAAAAAAUmN0MQAAAAQAAAAAVG9wIGxvbmcAAAAAAAAAAExlZnRsb25nAAAAAAAAAABCdG9tbG9uZwAAAQAAAAAAUmdodGxvbmcAAAEAAAAAA3VybFRFWFQAAAABAAAAAAAAbnVsbFRFWFQAAAABAAAAAAAATXNnZVRFWFQAAAABAAAAAAAGYWx0VGFnVEVYVAAAAAEAAAAAAA5jZWxsVGV4dElzSFRNTGJvb2wBAAAACGNlbGxUZXh0VEVYVAAAAAEAAAAAAAlob3J6QWxpZ25lbnVtAAAAD0VTbGljZUhvcnpBbGlnbgAAAAdkZWZhdWx0AAAACXZlcnRBbGlnbmVudW0AAAAPRVNsaWNlVmVydEFsaWduAAAAB2RlZmF1bHQAAAALYmdDb2xvclR5cGVlbnVtAAAAEUVTbGljZUJHQ29sb3JUeXBlAAAAAE5vbmUAAAAJdG9wT3V0c2V0bG9uZwAAAAAAAAAKbGVmdE91dHNldGxvbmcAAAAAAAAADGJvdHRvbU91dHNldGxvbmcAAAAAAAAAC3JpZ2h0T3V0c2V0bG9uZwAAAAAAOEJJTQQoAAAAAAAMAAAAAj/wAAAAAAAAOEJJTQQUAAAAAAAEAAAACDhCSU0EDAAAAAATnQAAAAEAAACgAAAAoAAAAeAAASwAAAATgQAYAAH/2P/iDFhJQ0NfUFJPRklMRQABAQAADEhMaW5vAhAAAG1udHJSR0IgWFlaIAfOAAIACQAGADEAAGFjc3BNU0ZUAAAAAElFQyBzUkdCAAAAAAAAAAAAAAAAAAD21gABAAAAANMtSFAgIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEWNwcnQAAAFQAAAAM2Rlc2MAAAGEAAAAbHd0cHQAAAHwAAAAFGJrcHQAAAIEAAAAFHJYWVoAAAIYAAAAFGdYWVoAAAIsAAAAFGJYWVoAAAJAAAAAFGRtbmQAAAJUAAAAcGRtZGQAAALEAAAAiHZ1ZWQAAANMAAAAhnZpZXcAAAPUAAAAJGx1bWkAAAP4AAAAFG1lYXMAAAQMAAAAJHRlY2gAAAQwAAAADHJUUkMAAAQ8AAAIDGdUUkMAAAQ8AAAIDGJUUkMAAAQ8AAAIDHRleHQAAAAAQ29weXJpZ2h0IChjKSAxOTk4IEhld2xldHQtUGFja2FyZCBDb21wYW55AABkZXNjAAAAAAAAABJzUkdCIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAAEnNSR0IgSUVDNjE5NjYtMi4xAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABYWVogAAAAAAAA81EAAQAAAAEWzFhZWiAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAAG+iAAA49QAAA5BYWVogAAAAAAAAYpkAALeFAAAY2lhZWiAAAAAAAAAkoAAAD4QAALbPZGVzYwAAAAAAAAAWSUVDIGh0dHA6Ly93d3cuaWVjLmNoAAAAAAAAAAAAAAAWSUVDIGh0dHA6Ly93d3cuaWVjLmNoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGRlc2MAAAAAAAAALklFQyA2MTk2Ni0yLjEgRGVmYXVsdCBSR0IgY29sb3VyIHNwYWNlIC0gc1JHQgAAAAAAAAAAAAAALklFQyA2MTk2Ni0yLjEgRGVmYXVsdCBSR0IgY29sb3VyIHNwYWNlIC0gc1JHQgAAAAAAAAAAAAAAAAAAAAAAAAAAAABkZXNjAAAAAAAAACxSZWZlcmVuY2UgVmlld2luZyBDb25kaXRpb24gaW4gSUVDNjE5NjYtMi4xAAAAAAAAAAAAAAAsUmVmZXJlbmNlIFZpZXdpbmcgQ29uZGl0aW9uIGluIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAdmlldwAAAAAAE6T+ABRfLgAQzxQAA+3MAAQTCwADXJ4AAAABWFlaIAAAAAAATAlWAFAAAABXH+dtZWFzAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAACjwAAAAJzaWcgAAAAAENSVCBjdXJ2AAAAAAAABAAAAAAFAAoADwAUABkAHgAjACgALQAyADcAOwBAAEUASgBPAFQAWQBeAGMAaABtAHIAdwB8AIEAhgCLAJAAlQCaAJ8ApACpAK4AsgC3ALwAwQDGAMsA0ADVANsA4ADlAOsA8AD2APsBAQEHAQ0BEwEZAR8BJQErATIBOAE+AUUBTAFSAVkBYAFnAW4BdQF8AYMBiwGSAZoBoQGpAbEBuQHBAckB0QHZAeEB6QHyAfoCAwIMAhQCHQImAi8COAJBAksCVAJdAmcCcQJ6AoQCjgKYAqICrAK2AsECywLVAuAC6wL1AwADCwMWAyEDLQM4A0MDTwNaA2YDcgN+A4oDlgOiA64DugPHA9MD4APsA/kEBgQTBCAELQQ7BEgEVQRjBHEEfgSMBJoEqAS2BMQE0wThBPAE/gUNBRwFKwU6BUkFWAVnBXcFhgWWBaYFtQXFBdUF5QX2BgYGFgYnBjcGSAZZBmoGewaMBp0GrwbABtEG4wb1BwcHGQcrBz0HTwdhB3QHhgeZB6wHvwfSB+UH+AgLCB8IMghGCFoIbgiCCJYIqgi+CNII5wj7CRAJJQk6CU8JZAl5CY8JpAm6Cc8J5Qn7ChEKJwo9ClQKagqBCpgKrgrFCtwK8wsLCyILOQtRC2kLgAuYC7ALyAvhC/kMEgwqDEMMXAx1DI4MpwzADNkM8w0NDSYNQA1aDXQNjg2pDcMN3g34DhMOLg5JDmQOfw6bDrYO0g7uDwkPJQ9BD14Peg+WD7MPzw/sEAkQJhBDEGEQfhCbELkQ1xD1ERMRMRFPEW0RjBGqEckR6BIHEiYSRRJkEoQSoxLDEuMTAxMjE0MTYxODE6QTxRPlFAYUJxRJFGoUixStFM4U8BUSFTQVVhV4FZsVvRXgFgMWJhZJFmwWjxayFtYW+hcdF0EXZReJF64X0hf3GBsYQBhlGIoYrxjVGPoZIBlFGWsZkRm3Gd0aBBoqGlEadxqeGsUa7BsUGzsbYxuKG7Ib2hwCHCocUhx7HKMczBz1HR4dRx1wHZkdwx3sHhYeQB5qHpQevh7pHxMfPh9pH5Qfvx/qIBUgQSBsIJggxCDwIRwhSCF1IaEhziH7IiciVSKCIq8i3SMKIzgjZiOUI8Ij8CQfJE0kfCSrJNolCSU4JWgllyXHJfcmJyZXJocmtyboJxgnSSd6J6sn3CgNKD8ocSiiKNQpBik4KWspnSnQKgIqNSpoKpsqzysCKzYraSudK9EsBSw5LG4soizXLQwtQS12Last4S4WLkwugi63Lu4vJC9aL5Evxy/+MDUwbDCkMNsxEjFKMYIxujHyMioyYzKbMtQzDTNGM38zuDPxNCs0ZTSeNNg1EzVNNYc1wjX9Njc2cjauNuk3JDdgN5w31zgUOFA4jDjIOQU5Qjl/Obw5+To2OnQ6sjrvOy07azuqO+g8JzxlPKQ84z0iPWE9oT3gPiA+YD6gPuA/IT9hP6I/4kAjQGRApkDnQSlBakGsQe5CMEJyQrVC90M6Q31DwEQDREdEikTORRJFVUWaRd5GIkZnRqtG8Ec1R3tHwEgFSEtIkUjXSR1JY0mpSfBKN0p9SsRLDEtTS5pL4kwqTHJMuk0CTUpNk03cTiVObk63TwBPSU+TT91QJ1BxULtRBlFQUZtR5lIxUnxSx1MTU19TqlP2VEJUj1TbVShVdVXCVg9WXFapVvdXRFeSV+BYL1h9WMtZGllpWbhaB1pWWqZa9VtFW5Vb5Vw1XIZc1l0nXXhdyV4aXmxevV8PX2Ffs2AFYFdgqmD8YU9homH1YklinGLwY0Njl2PrZEBklGTpZT1lkmXnZj1mkmboZz1nk2fpaD9olmjsaUNpmmnxakhqn2r3a09rp2v/bFdsr20IbWBtuW4SbmtuxG8eb3hv0XArcIZw4HE6cZVx8HJLcqZzAXNdc7h0FHRwdMx1KHWFdeF2Pnabdvh3VnezeBF4bnjMeSp5iXnnekZ6pXsEe2N7wnwhfIF84X1BfaF+AX5ifsJ/I3+Ef+WAR4CogQqBa4HNgjCCkoL0g1eDuoQdhICE44VHhauGDoZyhteHO4efiASIaYjOiTOJmYn+imSKyoswi5aL/IxjjMqNMY2Yjf+OZo7OjzaPnpAGkG6Q1pE/kaiSEZJ6kuOTTZO2lCCUipT0lV+VyZY0lp+XCpd1l+CYTJi4mSSZkJn8mmia1ZtCm6+cHJyJnPedZJ3SnkCerp8dn4uf+qBpoNihR6G2oiailqMGo3aj5qRWpMelOKWpphqmi6b9p26n4KhSqMSpN6mpqhyqj6sCq3Wr6axcrNCtRK24ri2uoa8Wr4uwALB1sOqxYLHWskuywrM4s660JbSctRO1irYBtnm28Ldot+C4WbjRuUq5wro7urW7LrunvCG8m70VvY++Cr6Evv+/er/1wHDA7MFnwePCX8Lbw1jD1MRRxM7FS8XIxkbGw8dBx7/IPci8yTrJuco4yrfLNsu2zDXMtc01zbXONs62zzfPuNA50LrRPNG+0j/SwdNE08bUSdTL1U7V0dZV1tjXXNfg2GTY6Nls2fHadtr724DcBdyK3RDdlt4c3qLfKd+v4DbgveFE4cziU+Lb42Pj6+Rz5PzlhOYN5pbnH+ep6DLovOlG6dDqW+rl63Dr++yG7RHtnO4o7rTvQO/M8Fjw5fFy8f/yjPMZ86f0NPTC9VD13vZt9vv3ivgZ+Kj5OPnH+lf65/t3/Af8mP0p/br+S/7c/23////tAAxBZG9iZV9DTQAB/+4ADkFkb2JlAGSAAAAAAf/bAIQADAgICAkIDAkJDBELCgsRFQ8MDA8VGBMTFRMTGBEMDAwMDAwRDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAENCwsNDg0QDg4QFA4ODhQUDg4ODhQRDAwMDAwREQwMDAwMDBEMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM/8AAEQgAoACgAwEiAAIRAQMRAf/dAAQACv/EAT8AAAEFAQEBAQEBAAAAAAAAAAMAAQIEBQYHCAkKCwEAAQUBAQEBAQEAAAAAAAAAAQACAwQFBgcICQoLEAABBAEDAgQCBQcGCAUDDDMBAAIRAwQhEjEFQVFhEyJxgTIGFJGhsUIjJBVSwWIzNHKC0UMHJZJT8OHxY3M1FqKygyZEk1RkRcKjdDYX0lXiZfKzhMPTdePzRieUpIW0lcTU5PSltcXV5fVWZnaGlqa2xtbm9jdHV2d3h5ent8fX5/cRAAICAQIEBAMEBQYHBwYFNQEAAhEDITESBEFRYXEiEwUygZEUobFCI8FS0fAzJGLhcoKSQ1MVY3M08SUGFqKygwcmNcLSRJNUoxdkRVU2dGXi8rOEw9N14/NGlKSFtJXE1OT0pbXF1eX1VmZ2hpamtsbW5vYnN0dXZ3eHl6e3x//aAAwDAQACEQMRAD8A9JlvilLfFUftQ8UvtXmlxI4A3pb4p5b4qh9q80vtQ8UuJXAG/LfFKW+Kofah4pfah4pcSuAN+W+KUtVD7UPFP9qHilxK4A3palLVR+0+aX2keKXErgDelqXt8VR+0jxS+0jxS4lcAb0tSlqo/aR4pfaR4pcSuAN6WpS3xVH7SPFN9qHilxK4A35b4ppb4qj9qHim+1DxQ408Ab8t8U8t8VnDKHipDJ80uNXAH//Q6H7X5pfa/NY/2g+KX2g+KYq3Y+1+af7X5rG+0HxT/aD4pKt2Ptfml9r81j/aD4p/tB8UE27H2vzS+1+ax/tB8U/2g+KSrdf7X5pfa/NZHrnxT+ufFJVuv9r80vtfmsj1z4peufFBNuv9r8032vzWT658UvXPilardb7X5pjl+ayfXPimN58UDJLrHL81E5nmsk3nxUTefFMM0gOwMvXlGZkz3WGy4k8q3TYSm+4mn//Rr+un9dZ3rpeulwsPG6Prp/X81neun9dLhVxuh66f11n+sl6yFJ43R9fzS9dZ/rJ/WQpXG6HrJesqHrJ/WTaTxt/1kvWVEWpxagVcTe9ZL1lTFicWJhK4SbfqqJtVfelvUUpr4pzao+oglybcoZZGaIbdT5K08bUBY9B9y2cQSAo/cXEaP//S5z1EvUVfen3p9NLibG9OHquHqQcgU8ScPUg9Vw5SDk0lXEnD04cggqQKYSm0wcpByEFMJhmm0gKkCoBTaFFLIuDIKYCZrUQNUE8rJFYBPCltShV5ZWeAYFMpkKKiM2xGKbGHuW9hN0Cw8Ye5b+CNAhxLpDR//9PjtyfchSpAp5Lm2lDlIFCCmEwyTaQFTCg1EaFFKa4FkERoUWhFa1QyyJC7QiNak1qK1qgllXhZrUVrE7WIrWKGWVkAYtYiBqk1qmGqvPIyxCPamIRSFBwURk2YBEQmUyFBK2eIT4v0l0OANAufxfpLocDgIgpns//U4oBSATAIgCbKTlWpoRGtSaEVrVDKa4Ka1Fa1JrUVrVXnkXBTWIrWJ2tRWtUEsi8KaxFaxJrUZrVBKbIFmsRGtTtaiNChlNkiFg1PCmAlCiMmaIRkKDkUobkAWzBC5RKm5QTwzRT4v0l0WBwFz2L9NdDgcBOCZ7P/1eOAU2hRARGhVpScgFm0IrQoNCM0KvOS8M2hFaFFoRWhV5SXhk0IzQoNCK0KGUmQM2hFaFFoRWhQykyBk0KYCTQpgKIyZYrQkQpwolMtmijchORXITk4M8ETlFScolSBninxfpBdDgcBc9i/SXRYHATgqez/AP/W5EBEaoBEaqMi44SNCM0ITQjMUEyvCRoRmhDYEZoVeZZAzaEZoQ2hGaFBIsgZtCM0KDQitChkWWLJoUwEwCmAoyWWKyi5TKg5AMsUTkJyK5CcpIs8UTlFScoKQM8Wxi/SC6LA4C53F+mF0OBwE4Kns//X5IIjVBqI1Z8i4wSsRmITEZirzLIErEZgQmIzAq8yyBK1FaENqM1QSLLFI1GaENgRWqGRZIswpBMFIBRkssVihuRSENyIZooXILkdyC5SxZoonKCm5QUgZotjF+muhwOAuexfprosDgJwTPZ//9DkwitQmorVmycYJWI7EFiMxQTZAmYjMQmIzVWmyRStRmITUZgUEiyxSsRWhDYEVoUMiyRZgKQCQCkAoyWaLEhQcEUhDcEgWWKB4QXhWHhAeFNEs8ULlBEcoFSgs0U2L9NdHgDQLncX6a6Pp40CcCmez//ZADhCSU0EIQAAAAAAWQAAAAEBAAAADwBBAGQAbwBiAGUAIABQAGgAbwB0AG8AcwBoAG8AcAAAABUAQQBkAG8AYgBlACAAUABoAG8AdABvAHMAaABvAHAAIABDAFMANQAuADEAAAABADhCSU0PoAAAAAAA+G1hbmlJUkZSAAAA7DhCSU1BbkRzAAAAzAAAABAAAAABAAAAAAAAbnVsbAAAAAMAAAAAQUZTdGxvbmcAAAAAAAAAAEZySW5WbExzAAAAAU9iamMAAAABAAAAAAAAbnVsbAAAAAEAAAAARnJJRGxvbmdmxb9JAAAAAEZTdHNWbExzAAAAAU9iamMAAAABAAAAAAAAbnVsbAAAAAQAAAAARnNJRGxvbmcAAAAAAAAAAEFGcm1sb25nAAAAAAAAAABGc0ZyVmxMcwAAAAFsb25nZsW/SQAAAABMQ250bG9uZwAAAAAAADhCSU1Sb2xsAAAACAAAAAAAAAAAOEJJTQ+hAAAAAAAcbWZyaQAAAAIAAAAQAAAAAQAAAAAAAAABAAAAADhCSU0EBgAAAAAABwAGAAAAAQEA/+ES4Gh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8APD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjEgNjQuMTQwOTQ5LCAyMDEwLzEyLzA3LTEwOjU3OjAxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHhtcDpDcmVhdGVEYXRlPSIyMDEzLTAxLTMxVDE0OjIyOjUyLTA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDEzLTAyLTAzVDE1OjU1OjQ5LTA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxMy0wMi0wM1QxNTo1NTo0OS0wODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9qcGVnIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjc1ODRGMUFFNTE2RUUyMTE5N0U0RUZCNDk0QkM4ODA2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjAxODAxMTc0MDcyMDY4MTE4MDgzOTY3Q0EyN0MyODkwIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MDE4MDExNzQwNzIwNjgxMTgwODM5NjdDQTI3QzI4OTAiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MDE4MDExNzQwNzIwNjgxMTgwODM5NjdDQTI3QzI4OTAiIHN0RXZ0OndoZW49IjIwMTMtMDEtMzFUMTQ6MjI6NTItMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDUzYgKE1hY2ludG9zaCkiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjZEODRGMUFFNTE2RUUyMTE5N0U0RUZCNDk0QkM4ODA2IiBzdEV2dDp3aGVuPSIyMDEzLTAyLTAzVDE0OjMzOjA4LTA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgV2luZG93cyIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NzA4NEYxQUU1MTZFRTIxMTk3RTRFRkI0OTRCQzg4MDYiIHN0RXZ0OndoZW49IjIwMTMtMDItMDNUMTU6NTM6NDMtMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDUzUuMSBXaW5kb3dzIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo3Mzg0RjFBRTUxNkVFMjExOTdFNEVGQjQ5NEJDODgwNiIgc3RFdnQ6d2hlbj0iMjAxMy0wMi0wM1QxNTo1NTo0NC0wODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjc0ODRGMUFFNTE2RUUyMTE5N0U0RUZCNDk0QkM4ODA2IiBzdEV2dDp3aGVuPSIyMDEzLTAyLTAzVDE1OjU1OjQ5LTA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ1M1LjEgV2luZG93cyIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvanBlZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9qcGVnIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo3NTg0RjFBRTUxNkVFMjExOTdFNEVGQjQ5NEJDODgwNiIgc3RFdnQ6d2hlbj0iMjAxMy0wMi0wM1QxNTo1NTo0OS0wODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIFdpbmRvd3MiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjc0ODRGMUFFNTE2RUUyMTE5N0U0RUZCNDk0QkM4ODA2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAxODAxMTc0MDcyMDY4MTE4MDgzOTY3Q0EyN0MyODkwIiBzdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6MDE4MDExNzQwNzIwNjgxMTgwODM5NjdDQTI3QzI4OTAiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD94cGFja2V0IGVuZD0idyI/Pv/iDFhJQ0NfUFJPRklMRQABAQAADEhMaW5vAhAAAG1udHJSR0IgWFlaIAfOAAIACQAGADEAAGFjc3BNU0ZUAAAAAElFQyBzUkdCAAAAAAAAAAAAAAABAAD21gABAAAAANMtSFAgIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEWNwcnQAAAFQAAAAM2Rlc2MAAAGEAAAAbHd0cHQAAAHwAAAAFGJrcHQAAAIEAAAAFHJYWVoAAAIYAAAAFGdYWVoAAAIsAAAAFGJYWVoAAAJAAAAAFGRtbmQAAAJUAAAAcGRtZGQAAALEAAAAiHZ1ZWQAAANMAAAAhnZpZXcAAAPUAAAAJGx1bWkAAAP4AAAAFG1lYXMAAAQMAAAAJHRlY2gAAAQwAAAADHJUUkMAAAQ8AAAIDGdUUkMAAAQ8AAAIDGJUUkMA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';
    climateBg.onload = function(){
        climateGradient.width = climateBg.width;
        climateGradient.height = climateBg.height;
        var ctx = climateGradient.getContext("2d");
        ctx.drawImage(climateBg,0,0);
    }

    // Function for filling the canvases with the data generated previously
    function buildImage(globeTexture,globeHeightmap) {
        var ctxT = globeTexture.getContext("2d");
        var ctxH = globeHeightmap.getContext("2d");
        var ctxC = climateGradient.getContext("2d");
        var imgdT = ctxT.getImageData(0,0,G.config.tx_w,G.config.tx_h);
        var imgdH = ctxH.getImageData(0,0,G.config.tx_w,G.config.tx_h);
        var imgdC = ctxC.getImageData(0,0,climateGradient.width,climateGradient.height);
        var pixT = imgdT.data;
        var pixH = imgdH.data;
        var grdC = imgdC.data;
        var current,dtI,gradX,gradY,gradI,color,color_ratio;

        var data_ratio = G.config.tx_w / G.config.w;
        var texture = G.getTexture();
        for(i = 0, j = 0, n = texture.length; i < n; i++) {
            current = Math.floor(texture[i]);
            dtI = Math.floor(i/G.config.tx_w/data_ratio)*G.config.w + Math.floor(i%G.config.tx_w / data_ratio);
            currentConditions = G.data.points[dtI];
            //current = Math.floor(G.data[dtI].height);

            gradY = Math.round((1 - (312.5 - currentConditions.temperature)/60)*255);
            if(gradY < 0)
                gradY = 0;
            if(currentConditions.precipitation < 0)
                currentConditions.precipitation = 0;
            gradX = Math.round((1 - currentConditions.precipitation/20)*255);
            if(gradX < 0)
                gradX = 0; 
            gradI = gradY*climateGradient.width+gradX;
            color = [grdC[gradI*4],grdC[gradI*4+1],grdC[gradI*4+2]];
            if(current > G.config.waterLevel) {
                pixH[i*4+2] = pixH[i*4+1] = pixH[i*4] = Math.floor((current - G.config.waterLevel)/10);
                pixT[i*4+0] = color[0];
                pixT[i*4+1] = color[1];
                pixT[i*4+2] = color[2];
            } else {
                pixH[i*4+2] = pixH[i*4+1] = pixH[i*4] = 0;
                pixT[i*4] = 0;
                pixT[i*4+1] = Math.floor(G.config.waterLevel/2) - (G.config.waterLevel - current)*3;
                pixT[i*4+2] = current*2+10;

                if(currentConditions.temperature < 252.5) {
                    pixT[i*4+0] = color[0];
                    pixT[i*4+1] = color[1];
                    pixT[i*4+2] = color[2];         
                }
            }
        }
        ctxT.putImageData(imgdT, 0, 0);
        ctxH.putImageData(imgdH, 0, 0);
    }

    var init = function(Generator) {
        //imgd,heights,gridData,configLoad
        /* Create Textures for Globe ----------- */
        G = Generator;

        var globeTexture = document.createElement( 'canvas' ); 
        globeTexture.width = G.config.tx_w;
        globeTexture.height = G.config.tx_h;
        var ctx = globeTexture.getContext("2d");
        ctx.fillStyle = "rgba(0, 0, 0, 255)"; 
        ctx.fillRect(0, 0, G.config.tx_w, G.config.tx_h);

        var globeHeightmap = document.createElement( 'canvas' ); 
        globeHeightmap.width = G.config.tx_w;
        globeHeightmap.height = G.config.tx_h;
        var ctx = globeHeightmap.getContext("2d");
        ctx.fillStyle = "rgba(0, 0, 0, 255)";
        ctx.fillRect(0, 0, G.config.tx_w, G.config.tx_h);

        visualization = document.createElement( 'canvas' );
        visualization.width = G.config.w;
        visualization.height = G.config.h;
        var ctx = visualization.getContext("2d");
        ctx.fillStyle = "rgba(0, 0, 0, 255)";
        ctx.fillRect(0, 0, G.config.w, G.config.h);

        buildImage(globeTexture,globeHeightmap);

        /* Create 3D Globe --------------------- */
        windowX = window.innerWidth;
        windowY = window.innerHeight;
        container = document.getElementById( 'container' );

        camera = new THREE.PerspectiveCamera( 60, windowX / windowY, 1, 10000 );
        camera.position.z = 500;

        scene = new THREE.Scene();

        group = new THREE.Object3D();
        sphere = new THREE.Object3D();

        group.add( sphere );
        scene.add( group );

        // lights

        ambientLight = new THREE.AmbientLight( 0x404040 );
        scene.add( ambientLight );

        directionalLight = new THREE.DirectionalLight( 0xcccccc, 2 );
        directionalLight.position.set( -500, 0, 500 );
        directionalLight.target = sphere;
        scene.add( directionalLight );

        // earth

        var earthTexture = new THREE.Texture( globeTexture );
        earthTexture.needsUpdate = true;
        var earthHeight = new THREE.Texture( globeHeightmap );
        earthHeight.needsUpdate = true;

        var geometry = new THREE.SphereGeometry( 200, 40, 30 );
        //var material = new THREE.MeshBasicMaterial( { map: earthTexture, overdraw: true } );
        var material = new THREE.MeshPhongMaterial( { ambient: 0x222222, color: 0x888888, specular: 0x333333, shininess: 2, perPixel: true, map: earthTexture, bumpMap: earthHeight, bumpScale: 20, metal: false } );

        earthMesh = new THREE.Mesh( geometry, material );
        sphere.add( earthMesh );

        // Visualization layer floating above the earth
        visualLayerGeometry = new THREE.SphereGeometry( 205, 40, 30 );
        visualLayerTexture = new THREE.Texture( visualization );
        visualLayer = new THREE.Mesh(visualLayerGeometry, new THREE.MeshLambertMaterial({ map: visualLayerTexture, opacity: 0.8, transparent: true }));
        visualLayer.visible = false;
        sphere.add( visualLayer );

        // Arc for showing shipping routes and flights
        var visualArcGeometry = new THREE.Geometry();
        while(visualArcGeometry.vertices.length < 108)
            visualArcGeometry.vertices.push( new THREE.Vector3( 0, 0, 0 ) );
        visualArc = new THREE.Line(visualArcGeometry,new THREE.LineBasicMaterial({linewidth:5}));
        visualArc.visible = false;
        sphere.add( visualArc );

        // Bars to show zombies and humans
        geometry = new THREE.CubeGeometry(0.75, 0.75, 1, 1, 1, 1, null, false, { px: true,
              nx: true, py: true, ny: true, pz: false, nz: true});
        geometry.faces.length = 5 // remove bottom of cube (=4 to temove top as well)
        for (var i = 0; i < geometry.vertices.length; i++) {
            var vertex = geometry.vertices[i];
            vertex.z += 0.5;
        }
        point = new THREE.Mesh(geometry);

        geometry = new THREE.CubeGeometry(0.75, 0.75, 1, 1, 1, 1, null, false, { px: true,
              nx: true, py: true, ny: true, pz: false, nz: true});
        geometry.faces.length = 5 // remove bottom of cube
        for (var i = 0; i < geometry.vertices.length; i++) {
            var vertex = geometry.vertices[i];
            vertex.z += 0.5;
        }
        point2 = new THREE.Mesh(geometry);

        /*geometry = new THREE.PolyhedronGeometry([[1,1,0],[0,1,0],[1,0,0],[1,1,1]],[[2,1,0],[0,3,2],[1,3,0],[2,3,1]],0.76, 0);
        point2 = new THREE.Mesh(geometry);*/

        camera.lookAt( scene.position );

        // set visible sphere height

        sphere2DRadius = getSphereScreenSize(500);

        /*renderer = new THREE.CanvasRenderer();
        renderer.setSize( window.innerWidth, window.innerHeight );*/
        renderer = new THREE.WebGLRenderer( { antialias: true, clearColor: 0x060708, clearAlpha: 1 } );
        renderer.setSize( windowX, windowY );

        container.appendChild( renderer.domElement );

        addData();
        ready = true;
    }

    function addData() {
        var lat, lng, color, i, element;
        var color = new THREE.Color();
        var infectColor = new THREE.Color();
        infectColor.setHSV( 0, 1.0, 0.9 );

        for (i = 0; i < G.data.points.length; i++) {
            element = G.data.points[i].total_pop / G.config.max_pop;
            //element = (G.data.points[i].temperature - 220) / 100;
            if(G.data.points[i].water) element = 0;
            if(element > 0) {
                color.setHSV( ( 0.6 - ( element * 0.3 ) ), 1.0, 1.0 );
                addPoint(G.data.points[i].lat, G.data.points[i].lng, element * 60, color, infectColor, G.data.points[i]);                
            }
        }

        subgeo.dynamic = true;

        points = new THREE.Mesh(subgeo, new THREE.MeshBasicMaterial({
            color: 0xffffff,
            vertexColors: THREE.FaceColors,
            morphTargets: false,
            side: THREE.BackSide
        }));
        sphere.add( points );
    };

    function addPoint( lat, lng, size, color, color2, datapoint ) {
        //point2 is zombies, point is people
        var phi = (90 - lat) * Math.PI / 180;
        var theta = (180 - lng) * Math.PI / 180;

        point.position.x = 200 * Math.sin(phi) * Math.cos(theta);
        point.position.y = 200 * Math.cos(phi);
        point.position.z = 200 * Math.sin(phi) * Math.sin(theta);

        point2.position.copy(point.position);
        point2.position.multiplyScalar(0.9);

        point.lookAt(sphere.position);
        point2.lookAt(sphere.position);

        point.scale.z = -size;
        point2.scale.z = 0.1;

        var i;
        for (i = 0; i < point.geometry.faces.length; i++) 
            point.geometry.faces[i].color = color;
        for (i = 0; i < point2.geometry.faces.length; i++) 
            point2.geometry.faces[i].color = color2;

        THREE.GeometryUtils.merge(subgeo, point);
        // Last 8 points in merged geometry should be the vertices of the moving bar
        datapoint.vertices_pop = subgeo.vertices.slice(-8); 

        THREE.GeometryUtils.merge(subgeo, point2);
        // Last 8 points in merged geometry should be the vertices of the moving bar
        datapoint.vertices_zom = subgeo.vertices.slice(-8); 
    }

    function render() {
        rotation.x += mouseVector.x * 0.002;
        if(Math.abs(rotation.y - mouseVector.y * 0.002) < PI_HALF)
            rotation.y -= mouseVector.y * 0.002;

        TWEEN.update();
        sphere.rotation.y = -rotation.x;
        sphere.rotation.x = rotation.y;

        onRender();

        renderer.render( scene, camera );
    }

    function animate() {
        requestAnimationFrame( animate );
        render();
    }

    function getSphereScreenSize( dist ) {
        // Given sphere size of 200 and FoV of 60
        return (400/(2 * Math.tan( 30/180 * Math.PI ) * dist))*windowY;
    }

    function checkIntersection( mouseX, mouseY ) {
        var projector = new THREE.Projector();
        var vector    = new THREE.Vector3( (mouseX / windowX) * 2 - 1,    -(mouseY / windowY) * 2 + 1, 0.5);

        // now "unproject" the point on the screen
        // back into the the scene itself. This gives
        // us a ray direction
        projector.unprojectVector(vector, camera);

        // create a ray from our current camera position
        // with that ray direction and see if it hits the sphere
        var raycaster  = new THREE.Raycaster(camera.position, vector.sub(camera.position).normalize())
        var intersects = raycaster.intersectObjects([visualLayer]);

        if(intersects.length) {
            return intersects[0].point;
        }
        return false;
    }

    function getVisualization(layer) {
        if(visualizations[layer] != undefined)
            return visualizations[layer];

        visualization.width = G.config.w;
        visualization.height = G.config.h;

        var ctx = visualization.getContext("2d"),
            imgd = ctx.getImageData(0,0,G.config.w,G.config.h),
            pix = imgd.data,
            data_ratio = G.config.tx_w / G.config.w,
            i,n;
        switch(layer) {
            case 'precipitation': 
                var setColor = function(i,val) {
                    pix[i*4+1] = Math.floor(Math.pow(val / 200,2) * 150);
                    pix[i*4+2] = Math.floor(val / 100 * 255);
                };
                var organizeColor = function(i) {
                    pix[i*4+3] = pix[i*4+2];
                    pix[i*4+2] = 255;
                }; 
                var save = true; break;
            case 'temperature': 
                var setColor = function(i,val) {
                    if(val < 290) {
                        pix[i*4+1] = Math.floor(Math.pow((290-val) / 50,2) * 150);
                        pix[i*4+2] = Math.floor((290-val) / 50 * 255);
                    }
                    if(val > 280) {
                        pix[i*4+0] = Math.floor((2/(Math.pow((val-310)/30,2)+1) - 1) * 255);
                        pix[i*4+1] += Math.floor((1.30/(Math.pow((val-295)/26,2)+1) - 1) * 255);                   
                    }
                };
                var organizeColor = function(i) {
                    pix[i*4+3] = Math.floor((pix[i*4] + pix[i*4+1] + pix[i*4+2])*0.7);
                    if(pix[i*4] > 0) {
                        pix[i*4+1] = pix[i*4+1]*(255/pix[i*4]);
                        pix[i*4] = 255
                    }
                    if(pix[i*4+2] > 0) {
                        if(pix[i*4] == 0)
                            pix[i*4+1] = pix[i*4+1]*(255/pix[i*4+2]);
                        pix[i*4+2] = 255
                    }
                }; 
                var save = true; break;
            case 'country': 
                var setColor = function(i,val) {
                        pix[i*4] = G.data.countries[val].color[0];
                        pix[i*4+1] = G.data.countries[val].color[1];
                        pix[i*4+2] = G.data.countries[val].color[2];       
                };
                var organizeColor = function(i) {
                    if(pix[i*4] == 0 && pix[i*4+1] == 0 && pix[i*4+2] == 0)
                        pix[i*4+3] = 0;
                    else
                        pix[i*4+3] = Math.floor((pix[i*4] + pix[i*4+1] + pix[i*4+2])*0.6);
                }; 
                var save = true; break;
            case 'perlinTest':
                var setColor = function(i,val) {
                    pix[i*4] = val * 255;
                };
                var organizeColor = function(i) {
                    pix[i*4+3] = pix[i*4];
                    pix[i*4] = 255;
                }; 
                var save = true; break;
        }
        //dtI = Math.floor(i/G.config.tx_w/data_ratio)*G.config.w + Math.floor(i%G.config.tx_w / data_ratio);
        for(i = 0, n = pix.length/4; i < n; i++) {
            currentSq = G.data.points[i];
            pix[i*4] = pix[i*4+1] = pix[i*4+2] = 0;
            pix[i*4+3] = 255;
            if(currentSq.total_pop > 0) {
                setColor(i,currentSq[layer]);
            }
        }
        ctx.putImageData(imgd, 0, 0);

        var scaledCanvas;
        while(data_ratio % 2 == 0 || data_ratio % 3 == 0) {
            if(data_ratio % 4 == 0) {
                scaledCanvas = hqx(visualization,4);
                data_ratio /=4;
            }
            else if(data_ratio % 3 == 0) {
                scaledCanvas = hqx(visualization,3);
                data_ratio /=3;
            }
            else {
                scaledCanvas = hqx(visualization,2);
                data_ratio /=2;
            }
            delete visualization;
            visualization = scaledCanvas;
        }

        ctx = visualization.getContext("2d");
        imgd = ctx.getImageData(0,0,G.config.tx_w,G.config.tx_h);
        pix = imgd.data;

        for(i = 0, n = pix.length/4; i < n; i++) {
            organizeColor(i);
        }
        ctx.putImageData(imgd, 0, 0);
        
        if(save) {
            visualizations[layer] = document.createElement( 'canvas' );
            visualizations[layer].width = G.config.tx_w;
            visualizations[layer].height = G.config.tx_h;
            ctx = visualizations[layer].getContext("2d");
            ctx.drawImage(visualization,0,0);
        }

        return visualization;
    }

    // Return functions
    return {
        animate: animate,
        getSphereCoords: function(mouseX,mouseY) {
            var distX = mouseX - windowX/2;
            var distY = mouseY - windowY/2;
            if(Math.sqrt(distX*distX + distY*distY) < sphere2DRadius/2) {
                var intersect = checkIntersection( event.clientX, event.clientY );

                var phi = Math.acos(intersect.y/205) - rotation.y;
                var theta = Math.asin(intersect.x/Math.sin(phi)/205) + rotation.x;
                if(theta*180/Math.PI + 90 > 0)
                    return [(90 - Math.abs(phi*180/Math.PI)),(theta*180/Math.PI + 90)%360,intersect];
                else
                    return [(90 - Math.abs(phi*180/Math.PI)),360 + (theta*180/Math.PI + 90)%360,intersect];
            }
            return false;
        },
        onRender: function(doOnRender) {
            onRender = doOnRender;
        },
        updateMatrix: function() {
            subgeo.verticesNeedUpdate = true;
        },
        resize: function(newWidth, newHeight) {
            if(camera != undefined) {
                windowX = newWidth;
                windowY = newHeight;

                camera.aspect = newWidth / newHeight;
                camera.updateProjectionMatrix();

                renderer.setSize( newWidth, newHeight );          
            }
        },
        lookAt: function (square) {
            var tween = new TWEEN.Tween(rotation).to({x: -(90 - square.lng) * Math.PI / 180, y: square.lat * Math.PI / 180, z: 0}, 2000);
            tween.easing(TWEEN.Easing.Cubic.Out);
            tween.start();
        },
        setData: function(dataPoint, popLength, zomLength) {
            if(zomLength) {
                if(Math.abs(zomLength - popLength) < 0.2)
                    zomLength = popLength + 0.2;
                dataPoint.vertices_zom[1].setLength(popLength);
                dataPoint.vertices_zom[3].setLength(popLength);
                dataPoint.vertices_zom[4].setLength(popLength);
                dataPoint.vertices_zom[6].setLength(popLength);
                dataPoint.vertices_zom[0].setLength(zomLength);
                dataPoint.vertices_zom[2].setLength(zomLength);
                dataPoint.vertices_zom[5].setLength(zomLength);
                dataPoint.vertices_zom[7].setLength(zomLength);
            } else {
                dataPoint.vertices_pop[0].setLength(popLength);
                dataPoint.vertices_pop[2].setLength(popLength);
                dataPoint.vertices_pop[5].setLength(popLength);
                dataPoint.vertices_pop[7].setLength(popLength);                
            }

        },
        setVisualization: function( layer ) {
            if(ready) {
                visualLayerTexture.image = getVisualization(layer);
                visualLayerTexture.needsUpdate = true;
                visualLayer.material.map = visualLayerTexture;
                visualLayer.visible = true;              
            }
        },
        closeVisualization: function () {
            if(ready)
                visualLayer.visible = false;
        },
        visualization: function () {
            if(ready)
                return visualLayer.visible;
            else
                return false;
        },
        displayArc: function (point1, point2) {
            var phi,theta,x,y,z,i,j,
                position, index, n_sub = 36;
            var ratio = 1/n_sub;

            phi = (90 - point1.lat) * Math.PI / 180;
            theta = (180 - point1.lng) * Math.PI / 180;
            x = 200 * Math.sin(phi) * Math.cos(theta);
            y = 200 * Math.cos(phi);
            z = 200 * Math.sin(phi) * Math.sin(theta);
            var start = new THREE.Vector3(x,y,z);

            phi = (90 - point2.lat) * Math.PI / 180;
            theta = (180 - point2.lng) * Math.PI / 180;
            x = 200 * Math.sin(phi) * Math.cos(theta);
            y = 200 * Math.cos(phi);
            z = 200 * Math.sin(phi) * Math.sin(theta);
            var end = new THREE.Vector3(x,y,z);

            var points = [start];
            var midpoint = new THREE.Vector3(0,0,0);
            for ( i = 0; i < n_sub; i++ ) {
                midpoint.set(0, 0, 0);
                for (j = 0; j < n_sub - i; j++)
                    midpoint.add(start);
                for (j = 0; j < i + 1; j++)
                    midpoint.add(end);
                midpoint.setLength(200 + 2*(n_sub/2 - Math.abs(n_sub/2 - i - 0.5)));
                points.push(new THREE.Vector3(0,0,0));
                points[points.length - 1].copy(midpoint);
            }
            points.push(end);

            var spline = new THREE.Spline(points);

            for ( i = 0; i < n_sub*3; i++ ) {
                index = i / ( n_sub*3 - 1 );
                position = spline.getPoint( index );

                visualArc.geometry.vertices[i].copy( position );
            }
            visualArc.geometry.verticesNeedUpdate = true;

            visualArc.visible = true;
        },
        hideArc: function () {
            visualArc.visible = false;
        },
        mouseVector: mouseVector,
        init: init
    };
}